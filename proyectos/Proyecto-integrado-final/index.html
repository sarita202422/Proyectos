<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Portafolio Personal</title>
</head>

<body>
    <h1>Mis Proyectos</h1>
    <a href="../../admin/login.php" style="position: absolute; top: 20px; right: 20px;">Iniciar sesi√≥n</a>
    <div id="proyectos"></div>

    <script>
        async function cargarProyectos() {
            const contenedor = document.getElementById("proyectos");
            contenedor.innerHTML = "Cargando...";

            try {
                const res = await fetch("../../API/proyectos.php");

                if (!res.ok) {
                    const errorData = await res.json();
                    throw new Error(errorData.error || "Error desconocido");
                }

                const proyectos = await res.json();

                if (proyectos.length === 0) {
                    contenedor.innerHTML = "<p>No hay proyectos para mostrar.</p>";
                    return;
                }

                contenedor.innerHTML = "";
                proyectos.forEach(p => {
                    contenedor.innerHTML += `
            <div>
              <h3>${p.titulo}</h3>
              <p>${p.descripcion}</p>
              ${p.url_github ? `<a href="${p.url_github}" target="_blank">GitHub</a>` : ''}
              ${p.url_produccion ? ` | <a href="${p.url_produccion}" target="_blank">Ver online</a>` : ''}
              ${p.imagen ? `<br><img src=" ../../uploads/${p.imagen}" alt="${p.titulo}" width="200"><br>` : ''}
              <hr>
            </div>
          `;
                });

            } catch (error) {
                contenedor.innerHTML = `<p style="color:red;">Error al cargar proyectos: ${error.message}</p>`;
            }
        }

        cargarProyectos();
    </script>
</body>

</html>